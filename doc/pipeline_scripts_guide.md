# 流水线脚本使用指南

## 概述

为了简化无监督学习交易信号识别系统的操作流程，我们提供了三个批处理脚本：

1. `run_full_pipeline.bat` - 完整流程控制脚本
2. `run_quick_pipeline.bat` - 快速流程脚本
3. `run_realtime_prediction.bat` - 实时预测脚本

## 脚本详细说明

### 1. run_full_pipeline.bat - 完整流程控制脚本

#### 功能
该脚本提供交互式的选择界面，允许用户选择性地执行各个步骤：
- 标签生成
- 模式识别
- 模式训练
- 信号预测

#### 使用方法
1. 双击运行 `run_full_pipeline.bat`
2. 根据提示选择是否执行每个步骤
3. 脚本会自动检查环境并执行选定的步骤

#### 适用场景
- 首次使用系统
- 需要重新生成部分数据
- 调试和测试各个模块

### 2. run_quick_pipeline.bat - 快速流程脚本

#### 功能
该脚本会自动依次执行所有步骤，无需用户干预：
1. 标签生成
2. 模式识别
3. 模式训练
4. 信号预测

#### 使用方法
1. 双击运行 `run_quick_pipeline.bat`
2. 脚本会自动完成整个流程

#### 适用场景
- 日常使用
- 自动化处理
- 快速获得结果

### 3. run_realtime_prediction.bat - 实时预测脚本

#### 功能
该脚本启动实时预测程序，支持三种运行模式：
1. 目录监控模式：监控指定目录中的新数据文件
2. 数据模拟模式：模拟实时数据流
3. 交互模式：手动控制预测过程

#### 使用方法
1. 双击运行 `run_realtime_prediction.bat`
2. 根据提示选择运行模式
3. 程序会根据选择的模式运行实时预测

#### 适用场景
- 实时交易信号预测
- 系统在线运行
- 与外部数据源集成

## 目录结构说明

```
unsupervised_learning/
├── run_full_pipeline.bat      # 完整流程控制脚本
├── run_quick_pipeline.bat     # 快速流程脚本
├── run_realtime_prediction.bat # 实时预测脚本
├── data/                      # 原始数据目录
├── label/                     # 标签数据目录
├── patterns/                  # 模式数据目录
├── model/                     # 模型保存目录
├── predictions/               # 预测结果目录
└── src/                       # 源代码目录
```

## 输出结果说明

### 标签生成结果
- 位置：`label/` 目录
- 文件格式：CSV
- 内容：带有交易信号标签的原始数据

### 模式识别结果
- 位置：`patterns/` 目录
- 文件格式：CSV、PNG图表
- 内容：识别出的交易模式和统计信息

### 模式训练结果
- 位置：`patterns/` 目录
- 文件格式：NPZ、CSV
- 内容：训练好的聚类模型和模式数据

### 信号预测结果
- 位置：`predictions/` 目录
- 文件格式：JSON、CSV
- 内容：预测的交易信号和置信度

## 常见问题解答

### Q: 运行脚本时出现"Python未找到"错误怎么办？
A: 请确保系统已安装Python，并且Python已添加到系统PATH环境变量中。

### Q: 如何准备输入数据？
A: 将CSV格式的价格数据放入`data/`目录，确保包含以下列：
- `x` 或 `time`：时间戳
- `a`, `b`, `c`, `d`：影响因子
- `index_value`：股指期货走势

### Q: 如何查看预测结果？
A: 预测结果保存在`predictions/`目录中，包括：
- JSON格式的详细预测结果
- CSV格式的预测结果汇总

### Q: 如何重新训练模型？
A: 运行`run_full_pipeline.bat`并选择执行所有步骤，或手动删除`patterns/`和`model/`目录中的文件后重新运行。

## 注意事项

1. 首次运行前请确保已安装所有依赖库
2. 确保输入数据格式正确
3. 根据需要调整脚本中的参数配置
4. 定期备份重要结果文件
5. 实时预测模式需要持续的数据输入